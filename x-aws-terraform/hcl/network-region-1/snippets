# Importing default VPC and its dependencies except IGW 


resource "aws_default_vpc" "default_vpc" {
  force_destroy = true
  tags = {
    Name = "Default VPC"
  }
}

resource "aws_default_subnet" "default_subnet_azs" {
  for_each          = toset(var.az_names)
  availability_zone = each.value
  force_destroy     = true
  depends_on = [aws_default_vpc.default_vpc]
}

resource "aws_default_route_table" "default_rt" {
  depends_on             = [aws_default_vpc.default_vpc]
  default_route_table_id = aws_default_vpc.default_vpc.default_route_table_id
  route = []
  tags = {
    Name = "default-route-table"
  }
}

resource "aws_default_security_group" "default_sg" {
  depends_on = [aws_default_vpc.default_vpc]
  vpc_id     = aws_default_vpc.default_vpc.id
}

resource "aws_default_network_acl" "default_nacl" {
  depends_on             = [aws_default_vpc.default_vpc]
  default_network_acl_id = aws_default_vpc.default_vpc.default_network_acl_id
}

resource "aws_default_vpc_dhcp_options" "default_dhcp" {
  depends_on = [aws_default_vpc.default_vpc]
}

#resource "aws_internet_gateway" "default-igw" {
#  depends_on = [aws_default_vpc.default_vpc]
#  vpc_id = aws_default_vpc.default_vpc.id
#}
